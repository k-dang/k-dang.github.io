---
import { Image } from "astro:assets";
import { MapPin, Download } from "@lucide/astro";
import { Button } from "@/components/ui/button";
import { ModeToggle } from "@/components/ModeToggle";
import { EmailButton } from "@/components/EmailButton";
import { CursorFollowerSprite } from "@/components/CursorFollowerSprite";
import SideBarContent from "@/layouts/SideBarContentLayout.astro";
import SideBarBadgeContent from "@/components/SideBarBadgeContent.astro";

// Assets
import githubLogo from "@/assets/github.svg";
import linkedInLogo from "@/assets/linkedIn.svg";
import portraitImg from "@/assets/portrait.png";
import walkingSpriteSheet from "@/assets/walking_sheet_transparent.png";

const languages = ["C#", "Python", "TypeScript", "JavaScript", "Bash"];
const webFrameworks = ["React", "Next.js", "Astro", "Angular", "Django"];
const mobile = ["React Native"];
const backendServices = [
  ".NET",
  "Node",
  "Firebase",
  "Azure Functions",
  "Azure Service Bus",
  "Cloudflare Workers",
];
const databases = ["SQL Server", "Postgres", "Cosmos DB", "MongoDB"];
const devopsTools = [
  "Azure",
  "Azure DevOps",
  "Vercel",
  "Git",
  "Github Actions",
  "Docker",
  "Terraform",
];
---

<div class="bg-white dark:bg-gray-800 rounded-xl p-6 h-fit md:sticky top-4 shadow-sm">
  <div class="flex justify-between">
    <ModeToggle client:load />
    <CursorFollowerSprite
      client:load
      spriteSrc={walkingSpriteSheet.src}
      frameWidth={256}
      frameHeight={256}
      frameCount={4}
      fps={6}
      scale={0.28}
      offsetX={10}
      offsetY={10}
    />
  </div>
  <div class="flex flex-col items-center text-center mb-6">
    <div
      class="w-32 h-32 bg-linear-to-br from-purple-400 to-indigo-600 rounded-full flex items-center justify-center mb-4 overflow-hidden"
    >
      <Image
        src={portraitImg}
        width={128}
        height={128}
        alt="profile"
        class="w-full h-full object-cover object-top"
        loading="eager"
      />
    </div>
    <h1 class="text-2xl font-bold dark:text-white">Kevin Dang</h1>
    <p class="text-gray-500 dark:text-gray-400">Senior Software Engineer</p>
    <div class="flex items-center text-sm text-gray-500 dark:text-gray-400 mt-2">
      <MapPin size={14} class="mr-1" />
      <span>Toronto, Canada</span>
    </div>
  </div>

  <div class="flex justify-center gap-2 mb-6">
    <a target="_blank" href="https://github.com/k-dang" aria-label="Github">
      <Button variant="outline" size="icon">
        <Image
          class="invert dark:invert-0"
          src={githubLogo}
          width="16"
          height="16"
          alt="Github"
          loading="eager"
        />
      </Button>
    </a>

    <a target="_blank" href="https://www.linkedin.com/in/kdang1/" aria-label="LinkedIn">
      <Button variant="outline" size="icon">
        <Image
          class="dark:invert invert-0"
          src={linkedInLogo}
          width="16"
          height="16"
          alt="LinkedIn"
          loading="eager"
        />
      </Button>
    </a>

    <EmailButton client:idle email="dangkevin12@gmail.com" />
    <a href="/kevin-dang-cv.pdf" download>
      <Button variant="purple" size="default">
        <Download />
        <span class="text-sm">Resume</span>
      </Button>
    </a>
  </div>

  <div class="space-y-4">
    <SideBarContent title="Education">
      <div class="text-sm">
        <p class="dark:text-white font-medium">McMaster University</p>
        <p class="text-gray-500 dark:text-gray-400">B.Eng Mechatronics Engineering</p>
      </div>
    </SideBarContent>
    <SideBarBadgeContent title="Languages" items={languages} badgeVariant="teal" />
    <SideBarBadgeContent title="Web Frameworks" items={webFrameworks} badgeVariant="purple" />
    <SideBarBadgeContent title="Mobile" items={mobile} badgeVariant="orange" />
    <SideBarBadgeContent title="Backend Services" items={backendServices} badgeVariant="stone" />
    <SideBarBadgeContent title="Databases" items={databases} badgeVariant="blue" />
    <SideBarBadgeContent title="DevOps & Tools" items={devopsTools} badgeVariant="gray" />
  </div>
</div>
